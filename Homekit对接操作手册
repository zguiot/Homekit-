目录
第一步：树莓派镜像烧写	
第二步：配置homebridge文件	
第三步：添加homebridge配件	
第四步：Homekit界面设置	
第五步：Homekit实现共享	
常见问题解决方法	

第一步：树莓派镜像烧写
如图1所示，Homekit要想实现与购买的设备通信，需要通过Homebridge进行桥接，所以我们第一步要做的就是烧写环境配置好的树莓派镜像，本人已将自己配置的树莓派系统生成了镜像，读者可直接下载烧写使用。提供的镜像已经配置SSH，可使用Putty进行调试
树莓派镜像烧写方法参考树莓派3B烧录方法及工具
需要的准备：①树莓派3b model;②2G及以上高速内存卡；③本教程提供的树莓派镜像、调试工具


第二步：配置homebridge文件
      步骤①：通过PUTTY与树莓派建立通信连接 （参考树莓派3B通信方方法及工具）；
      步骤②：修改添加密码和主机IP，树莓派安装有nano编辑工具（主机IP通过 App搜索可以查找，依据SN进行确认）
      步骤③：保存步骤②的配置文件，重启树莓派
      提示：本教程提到的脚本均在树莓派系统/home/pi目录下
 
第三步：添加homebridge配件
      直接打开苹果设备homekit，进入添加页面，点击没有代码或无法添加，进入到使用密码添加界面，只需要选择局域网中的homebridge设备，输入配置文件中的八位密码即可添加成功。

      注意：①苹果设备与树莓派在同一局域网才可以添加成功
            ②添加过程会因为网络、设备性能原因，而有所延迟
 
第四步：Homekit界面设置
      homekit在添加homebridge成功时，会将homebridge已经有的设备同步到Homekit中，只需要一直点击下一步，把设备添加进默认房间，之后可以自己创建房间把设备移过去。
 
第五步：Homekit实现共享
      ①将家庭用户添加到HomeKit家中，只需打开“主页”应用，然后点击左下角的家庭符号。
      ②在此屏幕上，您将看到您的家庭名称，点击右上角的家庭符号进入家庭设置界面。
      ③点击此界面的邀请输入或者从通讯录中添加家庭成员信息，点击发送。
      ④对方收到后点击接受就会将你的家庭设备信息同步给他，进而实现共享。
 
常见问题解决方法
目前为止遇到的问题主要有局域网络问题、苹果系统需要更新问题、homebridge修改问题，homebridge存在的问题用以下方法可以解决

问题一：刚添加设备无法区分具体设备
解决方法：
    ①：打开主机app进行控制，观察Homekit中的设备变化确定控制设备
    ②:  针对只显示设备可以观察数值进行区分
    ③：前两项确认不了的设备，利用设备断电排除的方法

问题二：发现Homekit中设备异常
解决方法：
    步骤一：重启树莓派和主机，若不行继续步骤二
    步骤二：利用PUTTY执行设备初始化脚本文件（/home/pi/homekit_dev_init.sh），若还是不行继续步骤三
    步骤三：打开Homekit找到名为Homebridge的设备，长按图标进入其设置界面如图11所示，点击“从家庭移除桥接设备”，并通过Putty执行树莓派中的脚本（/home/pi/homekit_registration.sh）,然后打开Homekit重新添加homebridge
问题三：需要更换homekit用户
    利用PUTTY执行设备初始化脚本文件（/home/pi/homekit_registration.sh）
问题四：homekit中没有homebridge的设备
    步骤一：打开App点击右下角我的，进入界面后找到实验室，点击进入，如图所示：
    步骤二：在空白处连续点击六下，出现相关开关选项
    步骤三：打开相关开关

